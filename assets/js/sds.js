/* Copyright (c) 2023 Synology Inc. All rights reserved. */

var sds=function(){var b=location.protocol,a=":5000";if("https:"===b){a=":5001"}return{mgrUrl:b+"//dsmdemo.synologydemo.com"+a,launch:function(c){$.ajax({type:"POST",url:this.mgrUrl+"/webapi/entry.cgi",timeout:30000,data:{api:"SYNO.DemoSite.Public",method:"launch_demosite",version:1,user_id:this.getUserId()},success:c,error:c})},login:function(g,j){console.log(g);var f=this.getUserId(),e,d,c,i=0,h=(-1<location.host.indexOf(".cn"));console.log(f);e=function(m,k,l){if("string"===typeof(m)){m=JSON.parse(m)}if(false===m.success){if(m.error&&400===m.error.code){m.success=true;k="success"}else{k="error"}}j(m,k)};d=function(m,l,k){if("timeout"===l&&3>i){i++;c();return}j({success:false},"error")};c=function(){$.ajax({type:"GET",url:b+"//"+g+a+"/webapi/auth.cgi",timeout:30000,data:{api:"SYNO.API.Auth",version:3,method:"login",account:"demouser",passwd:f,session:"NodeSynologyAPI"+Math.round(Math.random()*1000000000),format:"sid",cn:h,enable_syno_token:"yes"},crossDomain:true,xhrFields:{withCredentials:true},success:e,error:d})};c()},getAuthKey:function(e,d,c,f){$.ajax({type:"GET",url:b+"//"+e+a+"/webapi/entry.cgi",timeout:30000,data:{api:"SYNO.API.Auth.Key",version:7,method:"get",_sid:d,SynoToken:c},crossDomain:true,success:f,error:f})},getUserId:function(){var f,g,c,h,e,d;f=document.cookie;g=f.indexOf("user_id=");if(-1===g){c=new Date();h=c.getTime();h+=3600*24*365*10;c.setTime(h);d="Syn0"+Math.floor((Math.random())*Math.pow(10,15)).toString(16);document.cookie="user_id="+d+"; expires="+c.toUTCString()}f=document.cookie;g=f.indexOf("user_id=");if(-1<g){e=f.indexOf(";",g);if(-1<e){d=f.substring(g+8,e)}else{d=f.substring(g+8,f.length)}}else{d=""}return d},getDemoDsm:function(c){$.ajax({type:"POST",url:this.mgrUrl+"/webapi/entry.cgi",timeout:30000,crossDomain:true,data:{api:"SYNO.DemoSite.Public",method:"get_demosite",version:1,user_id:this.getUserId()},success:c,error:c})},queue:function(c){$.ajax({type:"GET",url:this.mgrUrl+"/webapi/entry.cgi",timeout:30000,crossDomain:true,data:{api:"SYNO.DemoSite.Public",method:"queue",version:1,user_id:this.getUserId()},success:c,error:c})},visitorAdd:function(){return}}}();
